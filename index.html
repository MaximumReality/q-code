<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Q-Code 3D Pyramid</title>
<style>
body {
    margin:0;
    background:#000;
    overflow:hidden;
    display:flex;
    justify-content:center;
    align-items:flex-start;
    height:100vh;
}

#pyramid-container {
    position: relative;
    width: 100%;
    height: 100%;
}

/* Cube styling */
.cube {
    position: absolute;
    width: 60px;
    height: 60px;
    transform-style: preserve-3d;
    cursor:pointer;
}

.face {
    position: absolute;
    width: 100%;
    height: 100%;
    box-sizing: border-box;
}

/* Top face — visible diamond */
.top {
    background: #ff0055;
    transform: rotateX(60deg) rotateZ(45deg);
    border: 2px solid #ff88aa;
    z-index: 2;
}

/* Side faces — same size, subtle shading */
.left-side {
    background: #990033;
    transform: rotateY(-90deg);
    transform-origin: left;
}
.right-side {
    background: #cc0044;
    transform: rotateX(-90deg);
    transform-origin: bottom;
}

/* Compiled state glow */
.cube.compiled .top {
    background:#00ffff;
    border:2px solid #88ffff;
    box-shadow:0 0 20px #00ffff;
}

/* Azul */
#azul {
    position:absolute;
    width:50px;
    z-index:999;
    pointer-events:none;
    transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    transform: translate(-50%, -90%);
}
</style>
</head>
<body>
<div id="pyramid-container">
    <img src="azul-tactical.png" id="azul">
</div>

<script>
const levels = 6;
const cubeSize = 60;
const spacing = 58; // slight overlap for pyramid stacking
const container = document.getElementById("pyramid-container");
const azul = document.getElementById("azul");

function buildPyramid() {
    container.innerHTML = '';
    container.appendChild(azul);

    const centerX = window.innerWidth/2;
    const startY = 100;

    for(let r = 0; r < levels; r++) {
        const tilesInRow = r + 1;
        const rowWidth = tilesInRow * spacing;
        const offsetX = centerX - rowWidth/2;

        for(let c = 0; c < tilesInRow; c++) {
            const cube = document.createElement("div");
            cube.className="cube";
            cube.style.width = cubeSize + "px";
            cube.style.height = cubeSize + "px";

            cube.innerHTML = `
                <div class="face left-side"></div>
                <div class="face right-side"></div>
                <div class="face top"></div>
            `;

            const xPos = offsetX + c*spacing;
            const yPos = startY + r*spacing*0.6;

            cube.style.left = (xPos - cubeSize/2) + "px";
            cube.style.top = yPos + "px";
            cube.style.zIndex = r; // top rows behind, bottom rows in front

            cube.addEventListener("click", () => {
                cube.classList.toggle("compiled");
                azul.style.left = xPos + "px";
                azul.style.top = yPos - cubeSize*0.2 + "px";
            });

            container.appendChild(cube);

            if(r === 0 && c === 0){
                azul.style.left = xPos + "px";
                azul.style.top = yPos - cubeSize*0.2 + "px";
            }
        }
    }
}

buildPyramid();
window.addEventListener("resize", buildPyramid);
</script>
</body>
</html>
