<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Q-Code 2D Grid Pyramid</title>
<style>
body {
    margin:0;
    background:#000;
    display:flex;
    justify-content:center;
    align-items:flex-start;
    height:100vh;
    overflow:hidden;
}

#pyramid-container {
    position: relative;
    width: 100%;
    height: 100%;
}

.cube {
    position: absolute;
    width: 60px;
    height: 60px;
    background:#ff0055;
    border:2px solid #ff88aa;
    box-sizing:border-box;
    cursor:pointer;
    transition: all 0.2s ease;
}

.cube.compiled {
    background:#00ffff;
    box-shadow:0 0 15px #00ffff;
}

#azul {
    position:absolute;
    width:50px;
    z-index:999;
    pointer-events:none;
    transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    transform: translate(-50%, -10%);
}
</style>
</head>
<body>
<div id="pyramid-container">
    <img src="azul-tactical.png" id="azul">
</div>

<script>
const container = document.getElementById("pyramid-container");
const azul = document.getElementById("azul");

const cubeSize = 60;
const spacing = 5; // gap between cubes
const levels = [
    7, // row 0
    6, // row 1
    5, // row 2
    4, // row 3
    3, // row 4
    2, // row 5
    1  // row 6
];

let cubes = [];

function buildPyramid() {
    container.innerHTML = '';
    container.appendChild(azul);
    cubes = [];

    const startX = window.innerWidth / 2;
    const startY = 50;

    for(let row = 0; row < levels.length; row++){
        const cubesInRow = levels[row];
        const rowWidth = cubesInRow * (cubeSize + spacing) - spacing;
        const offsetX = startX - rowWidth/2;

        for(let c = 0; c < cubesInRow; c++){
            const cube = document.createElement("div");
            cube.className="cube";
            const xPos = offsetX + c * (cubeSize + spacing);
            const yPos = startY + row * (cubeSize + spacing);

            cube.style.left = xPos + "px";
            cube.style.top = yPos + "px";
            cube.dataset.row = row;
            cube.dataset.col = c;

            cube.addEventListener("click", () => {
                cube.classList.toggle("compiled");
                azul.style.left = xPos + cubeSize/2 + "px";
                azul.style.top = yPos + cubeSize/2 + "px";
            });

            container.appendChild(cube);
            cubes.push(cube);

            // Place Azul initially on top cube
            if(row === levels.length-1 && c === 0){
                azul.style.left = xPos + cubeSize/2 + "px";
                azul.style.top = yPos + cubeSize/2 + "px";
            }
        }
    }
}

buildPyramid();
window.addEventListener("resize", buildPyramid);
</script>
</body>
</html>
